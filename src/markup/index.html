<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<title>Lapine Web Engine</title>
	</head>
	<body>
		<h1>Lapine Web Engine</h1>
		<button id="test" type="button" name="button">Test</button>
		<script type="text/javascript">

			const ws = new WebSocket('ws://127.0.0.1:3001');

			ws.onopen = () => {
				console.log('Connected to server');
			};

			ws.onmessage = (event) => {
				console.log('ws.onmessage',event.data);
			};

			ws.onclose = () => {
				console.log('Disconnected from server');
			};

			const method = async function() {
				console.log('Hello');
				ws.send('ws.send Hello');
				const url = new URL('/dosomething',document.location.href);
				const options = {
					method: 'GET',
					headers: {
						'document-type': 'text/html'
					}
				}
				const response = await fetch(url,options);
				console.log(response);
			}

			const test = document.getElementById('test');

			test.addEventListener('click',method,false);

		</script>
	</body>
</html>
